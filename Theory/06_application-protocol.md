## application-protocol
### 2023. 09. 27 수업

* 응용 프로그램 프로토콜
  * 응용 프로그램 수준에서 주고받는 데이터 형식과 의미, 처리 방식 등을 정의한 프로토콜
  * 이것이 결정되면 소켓 프로그래밍을 이용해 데이터 주고 받도록 작성하면 됨
  * 메세지 형식 정하는 것  
  
 
* 메세지 설계
  * 통신 양단이 주고 받을 데이터 요소를 구조체 정의(메세지 설계)할 때 고려해야 할 사항이 존재  
  

* 메세지 타입을 구분할 수 있도록 필드를 추가할 수도!  
```C
struct DrawingMessage(
  int type;     // = LINE
  int x1, y1;   // 직선의 시작점
  int x2, y2;   // 직선의 끝점
  int width;    // 선의 두께
  int color;    // 선의 색상
);  
```
  
  
##### 1. 경계구분
* TCP 같이 메시지 경계를 구분하지 않는 프로토콜 사용 경우, 애플레케이션에 처리가 필요
* 송신자
  * 항상 고정 길이 데이터 보낸다        ->  로그인, 패스워드 등에서 주로 사용 (n글자 등), 짧은 데이터 통신시 메모리 낭비
  * 경계 구분을 위해 특별한 표시(EOR)를 삽입한다       -> 낭비되는 공간을 줄일 수 있음, 쉽지 않음
  * 보낼 데이터 길이를 고정 길이 데이터로 보내고, 가변 길이 데이터를 이어 보낸다      -> 앞의 데이터 길이는 클라와 서버 협이 필요, 매우 효율적인 방법    
* 수신자
  * 항상 고정 길이 데이터 받는다
  * EOR이 나올 때까지 데이터를 읽은 후 처리
  * 고정 길이 데이터 읽어 뒤따라 오는 데이터의 길이를 알아내어 이 길이만큼 데이터를 처리한다.
  

![image](https://github.com/MiyeongEom/NetworkGameProgramming/assets/112458035/e29faa01-c664-4145-b57d-ff43ed51ef1e)  

##### 2. 바이트 정렬
* 서로 다른 바이트 정렬 방식을 사용하는 시스템 사이에 데이터 교환은 바이트 정렬 방식을 통일해야 함
* 빅엔디안이 일반적인 방법


##### 3. 멤버 정렬
* 구조체 멤버의 시작 주소에 대한 제약 사항  
![image](https://github.com/MiyeongEom/NetworkGameProgramming/assets/112458035/de5988e1-427f-4bf9-866e-231eced723da)   
![image](https://github.com/MiyeongEom/NetworkGameProgramming/assets/112458035/9cc48e38-b998-4cbe-b3c5-b227e8a5e39b)





